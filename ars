from telegram import Update, InlineKeyboardButton, InlineKeyboardMarkup
from telegram.ext import ApplicationBuilder, CommandHandler, CallbackQueryHandler, ContextTypes

TOKEN = '8001473439:AAEzgkSKlL7bygry_r2J3NULIcSleSYnrHg'  # <-- –≤—Å—Ç–∞–≤—å —Å—é–¥–∞ —Å–≤–æ–π —Ç–æ–∫–µ–Ω
YOUR_TELEGRAM_LINK = 'https://t.me/youngsir'  # <-- —Å—é–¥–∞ —Å—Å—ã–ª–∫—É –Ω–∞ —Å–µ–±—è (@username)

# –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ —Å HTML-—Å—Å—ã–ª–∫–∞–º–∏
welcome_text = (
    "–ü—Ä–∏–≤–µ—Ç! üòä\n\n"
    "ü§ñ –Ø –±–æ—Ç –∫–∞–Ω–∞–ª–∞ <b>Ars & Apple</b>.\n\n"
    "üçÄ –ü–æ–∫–∞ —è –º–æ–≥—É –ø—Ä–∏–Ω–∏–º–∞—Ç—å –æ–ø–ª–∞—Ç—É —Ç–æ–ª—å–∫–æ –ø–æ <b>–°–ë–ü</b> –ª–∏–±–æ —á–µ—Ä–µ–∑ "
    "<a href='https://www.avito.ru/user/7e210ef08b39271281a10abf5d15b44d/profile?src=sharing'>–ê–≤–∏—Ç–æ</a>.\n\n"
    "üÜï –ù–µ –∑–∞–±—É–¥—å—Ç–µ –ø–æ–¥–ø–∏—Å–∞—Ç—å—Å—è, —á—Ç–æ–±—ã –±—ã—Ç—å –≤ –∫—É—Ä—Å–µ –Ω–æ–≤–æ—Å—Ç–µ–π:\n"
    "<a href='https://youtube.com/@arstechlab?si=IgWxe6vYbZAbkGyy'>YouTube</a> üì± | "
    "<a href='https://t.me/ArsAndApple'>Telegram</a> ‚úîÔ∏è"
)

# –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é
async def start(update: Update, context: ContextTypes.DEFAULT_TYPE):
    keyboard = [
        [InlineKeyboardButton("üì± iPhone 16", callback_data='iphone')],
        [InlineKeyboardButton("üíª iPad AIR/PRO", callback_data='ipad')]
    ]
    reply_markup = InlineKeyboardMarkup(keyboard)

    await update.effective_chat.send_message(
        welcome_text,
        parse_mode="HTML",
        reply_markup=reply_markup,
        disable_web_page_preview=True
    )

# –û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–∞–∂–∞—Ç–∏–π –Ω–∞ –∫–Ω–æ–ø–∫–∏
async def handle_button(update: Update, context: ContextTypes.DEFAULT_TYPE):
    query = update.callback_query
    await query.answer()

    if query.data == 'iphone':
        await query.edit_message_text(
            "–í—ã –≤—ã–±—Ä–∞–ª–∏: üì± iPhone 16\n\niPhone 16 128GB Pink Sim-eSim ‚Äì 61.000‚ÇΩ\n\niPhone 16 128GB White Sim-eSim ‚Äì 62.000‚ÇΩ\n\n–ß—Ç–æ–±—ã –ø–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –∑–∞–∫–∞–∑, –Ω–∞–ø–∏—à–∏—Ç–µ –º–Ω–µ: " + YOUR_TELEGRAM_LINK,
            reply_markup=back_markup()
        )

    elif query.data == 'ipad':
        await query.edit_message_text(
            "–í—ã –≤—ã–±—Ä–∞–ª–∏: üíª iPad\n\n–ß—Ç–æ–±—ã –ø–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –∑–∞–∫–∞–∑, –Ω–∞–ø–∏—à–∏—Ç–µ –º–Ω–µ: " + YOUR_TELEGRAM_LINK,
            reply_markup=back_markup()
        )

    elif query.data == 'back':
        await start(update, context)

# –ö–Ω–æ–ø–∫–∞ "–ù–∞–∑–∞–¥"
def back_markup():
    keyboard = [[InlineKeyboardButton("üîô –ù–∞–∑–∞–¥", callback_data='back')]]
    return InlineKeyboardMarkup(keyboard)

# –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞
def main():
    app = ApplicationBuilder().token(TOKEN).build()

    app.add_handler(CommandHandler("start", start))
    app.add_handler(CallbackQueryHandler(handle_button))

    print("–ë–æ—Ç –∑–∞–ø—É—â–µ–Ω...")
    app.run_polling()

if __name__ == '__main__':
    main()
